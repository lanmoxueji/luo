<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>落网-独立音乐推荐</title>
    <link href="css/index.css" rel="stylesheet" type="text/css">
</head>
<body>
    <!--导航栏-->
    <div class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <span class="icon-logo"></span>
            </a>
            <div class="content">
                <ul>
                    <li class="navi"><a class="header-a" href="music1.html">期刊</a></li>
                    <li class="navi"><a class="header-a" href="single.html">单曲</a></li>
                    <li class="navi"><a class="header-a" href="essays.html">专栏</a></li>
                    <li class="navi"><a class="header-a" href="huodong.html">活动</a></li>
                    <li class="navi"><a class="header-a" href="app.html">APP</a></li>
                </ul>
            </div>
            <div class="login">
                <a href="login.html">
                    <span>注册/登录</span>
                </a>
            </div>

        </div>
    </div>

    <div id="body">
        <!--轮播框-->
        <div id="wrapper">
            <div id="banner">
                <ul class="imgList">
                    <li><a href="shihouyan.html"><img src="img/l1.png" alt="puss in boots1"></a></li>
                    <li><a href="qingchun.html"><img src="img/l2.jpg" alt="puss in boots2"></a></li>
                    <li><a href="gay.html"><img src="img/l3.png" alt="puss in boots3"></a></li>
                    <li><a href="wutiaoren.html"><img src="img/l4.png" alt="puss in boots4"></a></li>
                </ul>
                <ul class="indexList">
                    <li class="indexOn"></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
        </div>


        <!--音乐期刊-->
        <div>
            <div class="periodical-title">
                <span>音乐期刊</span>
                <a href="#">更多</a>
                <a href="#">金属</a>
                <a href="#">爵士</a>
                <a href="#">暗潮</a>
                <a href="#">古典</a>
                <a href="#">英伦</a>
                <a href="#">电子</a>
                <a href="#">流行</a>
                <a href="#">民谣</a>
                <a href="#">另类</a>
                <a href="#">摇滚</a>
            </div>
        </div>
        <div id="periodical-body">
            <div id="periodical-1">
                <a href="#">
                    <img src="img/periodical-1.jpg">
                    <div>vol.968 拖若终将是别离</div>
                </a>
            </div>
            <div class="periodical_left">
                <div id="periodical-2">
                    <a href="#">
                        <img src="img/periodical-2.jpg">
                        <div>vol.967 暮西山</div>
                    </a>
                </div>
                <div id="periodical-3">
                    <a href="#">
                        <img src="img/periodical-3.jpg">
                        <div>vol.966 在穿梭自由里与我相遇</div>
                    </a>
                </div>
            </div>
        </div>

        <!--原创推荐-->
        <div class="create">
            <div class="create-title">
                <span>原创推荐</span>
                <a href="#">更多</a>
                <a href="#">专栏</a>
                <a href="#">单曲</a>
            </div>
            <div id="create-body">
                <div class="create-1">
                    <img src="img/create-1.jpg">
                    <div class="create-1-title">
                        <a href="single.html">
                            <span>开心就足够</span>
                        </a>
                        <p>徐真真</p>
                    </div>
                    <div class="create-1-body">
                        <span class="create-1-body-top"></span>
                            &nbsp;&nbsp;&nbsp;&nbsp;人生不可能一帆风顺，你会选择什么态度去面对？有人会重新调整新的状态投入寻找理想生活，有人则一蹶不振
                            放弃自己坚持的东西。开心乐观的信仰，有时比黄金珍贵，徐真真用一首朗朗上口的Rap来告诉你看似复杂
                            却又浅显的道理，轻快的flow与积极向上的歌词让人一秒就能豁然开朗，和真真的笑容一样像阳光般照耀着你，
                            驱散你内心的阴霾。今天，我想看到新的你，寒冬里也别忘记去晒晒太阳。
                        <span class="create-1-body-bottom"></span>
                    </div>
                </div>
                <div class="create-right">
                    <div class="create-2">
                        <img src="img/create-2.jpg">
                        <a href="essays.html">
                            <span>人类首张在太空录制的专辑</span>
                        </a>
                        <p>李卤味</p>
                    </div>
                    <div class="create-3">
                        <img src="img/create-3.jpg">
                        <a href="essays.html">
                            <span>Sugar Man：隐没在城市里的一把声音</span>
                        </a>
                        <p>LUO</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--底部-->
    <div class="bottom">
        <div class="bottom-content">
            <div class="about">
                <h4 class="about-title">关于</h4>
                <a class="bottom-a" href="#">
                    <p class="about-content">关于落网</p>
                </a>
                <a class="bottom-a" href="#">
                    <p class="about-content">加入我们</p>
                </a>
                <a class="bottom-a" href="#">
                    <p class="about-content">联系合作</p>
                </a>
                <a class="bottom-a" href="#">
                    <p class="about-content">反馈意见</p>
                </a>
                <a class="bottom-a" href="#">
                    <p class="about-content">友情链接</p>
                </a>
            </div>
            <div class="APP">
                <h4 class="app-title">APP</h4>
                <p class="app-content">
                    <span class="app-iphone"></span>
                    <a class="bottom-a" href="app.html">
                        <span class="app-font">for iPhone</span>
                    </a>
                </p>
                <p class="app-content">
                    <span class="app-android"></span>
                    <a class="bottom-a" href="app.html">
                        <span class="app-font">for Android</span>
                    </a>
                </p>
                <p class="app-content">
                    <span class="app-wp"></span>
                    <a class="bottom-a" href="app.html">
                        <span class="app-font">for Windows Phone</span>
                    </a>
                </p>
            </div>
            <div class="sns">
                <h4 class="sns-title">关注落网</h4>
                <div>
                    <div class="sns-qq"></div>
                    <div class="sns-wechat"></div>
                    <div class="sns-weibo"></div>
                    <div class="sns-douban"></div>
                </div>
                <br><br>
                <div class="sns-content">
                    © 2017 落网
                </div><br>
                <div>
                    <span class="sns-icon"></span>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        var curIndex = 0, //当前index
            imgArr = getElementsByClassName("imgList")[0].getElementsByTagName("li"), //获取图片组
            imgLen = imgArr.length,
            indexArr = getElementsByClassName("indexList")[0].getElementsByTagName("li"); //获取控制index组
        // 定时器自动变换2.5秒每次
        var autoChange = setInterval(function(){
            if(curIndex < imgLen -1){
                curIndex ++;
            }else{
                curIndex = 0;
            }
            //调用变换处理函数
            changeTo(curIndex);
        },2500);

        //清除定时器时候的重置定时器--封装
        function autoChangeAgain(){
            autoChange = setInterval(function(){
                if(curIndex < imgLen -1){
                    curIndex ++;
                }else{
                    curIndex = 0;
                }
                //调用变换处理函数
                changeTo(curIndex);
            },2500);
        }

        //调用添加事件处理
        addEvent();

        //给左右箭头和右下角的图片index添加事件处理
        function addEvent(){
            for(var i=0;i<imgLen;i++){
                //闭包防止作用域内活动对象item的影响
                (function(_i){
                    //鼠标滑过则清除定时器，并作变换处理
                    indexArr[_i].onmouseover = function(){
                        clearTimeout(autoChange);
                        changeTo(_i);
                        curIndex = _i;
                    };
                    //鼠标滑出则重置定时器处理
                    indexArr[_i].onmouseout = function(){
                        autoChangeAgain();
                    };
                })(i);
            }

            //给左箭头prev添加上一个事件
            var prev = document.getElementById("prev");
            prev.onmouseover = function(){
                //滑入清除定时器
                clearInterval(autoChange);
            };
            prev.onclick = function(){
                //根据curIndex进行上一个图片处理
                curIndex = (curIndex > 0) ? (--curIndex) : (imgLen - 1);
                changeTo(curIndex);
            };
            prev.onmouseout = function(){
                //滑出则重置定时器
                autoChangeAgain();
            };

            //给右箭头next添加下一个事件
            var next = document.getElementById("next");
            next.onmouseover = function(){
                clearInterval(autoChange);
            };
            next.onclick = function(){
                curIndex = (curIndex < imgLen - 1) ? (++curIndex) : 0;
                changeTo(curIndex);
            };
            next.onmouseout = function(){
                autoChangeAgain();
            };
        }

        //左右切换处理函数
        function changeTo(num){
            //设置image
            var imgList = getElementsByClassName("imgList")[0];
            goLeft(imgList,num*960); //左移一定距离
            //设置image 的 info
            var curInfo = getElementsByClassName("infoOn")[0];
            removeClass(curInfo,"infoOn");
            //设置image的控制下标 index
            var _curIndex = getElementsByClassName("indexOn")[0];
            removeClass(_curIndex,"indexOn");
            addClass(indexArr[num],"indexOn");
        }


        //图片组相对原始左移dist px距离
        function goLeft(elem,dist){
            if(dist == 960){ //第一次时设置left为0px 或者直接使用内嵌法 style="left:0;"
                elem.style.left = "0px";
            }
            var toLeft; //判断图片移动方向是否为左
            dist = dist + parseInt(elem.style.left); //图片组相对当前移动距离
            if(dist<0){
                toLeft = false;
                dist = Math.abs(dist);
            }else{
                toLeft = true;
            }
            for(var i=0;i<= dist/20;i++){ //这里设定缓慢移动，10阶每阶40px
                (function(_i){
                    var pos = parseInt(elem.style.left); //获取当前left
                    setTimeout(function(){
                        pos += (toLeft)? -(_i * 20) : (_i * 20); //根据toLeft值指定图片组位置改变
                        //console.log(pos);
                        elem.style.left = pos + "px";
                    },_i * 25); //每阶间隔50毫秒
                })(i);
            }
        }

        //通过class获取节点
        function getElementsByClassName(className){
            var classArr = [];
            var tags = document.getElementsByTagName('*');
            for(var item in tags){
                if(tags[item].nodeType == 1){
                    if(tags[item].getAttribute('class') == className){
                        classArr.push(tags[item]);
                    }
                }
            }
            return classArr; //返回
        }

        // 判断obj是否有此class
        function hasClass(obj,cls){  //class位于单词边界
            return obj.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
        }
        //给 obj添加class
        function addClass(obj,cls){
            if(!this.hasClass(obj,cls)){
                obj.className += cls;
            }
        }
        //移除obj对应的class
        function removeClass(obj,cls){
            if(hasClass(obj,cls)){
                var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
                obj.className = obj.className.replace(reg,'');
            }
        }

    </script>
</body>
</html>